<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge;chrome=1' http-equiv='X-UA-Compatible'>
<link href='/stylesheets/all.css?1384954982' media='all' rel='stylesheet' type='text/css'>
<link href='/images/favicon.ico' rel='icon' type='image/ico'>
<title>
RPiとHipchatでインターホン作った - fukayatsu.dev
</title>
<script src="/javascripts/all.js" type="text/javascript"></script>
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36253613-1']);
  _gaq.push(['_setDomainName', 'blog.fukayatsu.com']);
  
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body>
<div class='content'>
<header>
<div class='header-inner'>
<div class='header-image'>
<a href="/"><img src='/images/fukayatsu.jpg'>
</a>
</div>
<div class='header-text'>
<a href="/"><h1 class='header-title'>
fukayatsu.dev
</h1>
</a>
<a target="_new" href="http://blog.fukayatsu.com/"><p class='header-description'>
under development
</p>
</a>
</div>
</div>
</header>
<div class='publish-date'>
<a href="/2014/01/19/intercom-using-raspberry-pi-and-hipchat/">2014-01-19 21:47:00 +0900</a>
</div>
<div class='tags'>
<a href="/tags/raspberry-pi/">raspberry-pi</a>
<a href="/tags/intercom/">intercom</a>
<a href="/tags/ruby/">ruby</a>
<a href="/tags/hipchat/">hipchat</a>
</div>
<div id='main' role='main'>
<h1 class='title'>RPiとHipchatでインターホン作った</h1>
<p>オフィスにインターホンがないので作った。</p>

<h2>配線図</h2>

<p><img alt="w50" src="/images/2014-01-19-1390133638_1.png" /></p>

<p>左のスイッチがメインのスイッチで、右のスイッチがシャットダウンスイッチ。あとカメラモジュール。</p>

<h2>組み立て</h2>

<ul>
<li><p>今回は配線が見えないように白いケースを使った。<br>
<img alt="w50" src="/images/2014-01-19-1390133850_1.jpg" /></p></li>
<li><p>青いスイッチがメインスイッチ(人を呼ぶやつ)<br>
<img alt="w50" src="/images/2014-01-19-1390133971_1.jpg" /></p></li>
<li><p>右下の黒いスイッチはシャットダウン用<br>
<img alt="w50" src="/images/2014-01-19-1390134001_1.jpg" /></p></li>
<li><p><a href="http://www.sengoku.co.jp/mod/sgk_cart/detail.php?code=EEHD-4FUK">Ｓｅｅｅｄ Ｓｔｕｄｉｏ ８０００５１００１ Ｒａｓｐｂｅｒｒｙ　Ｐｉ用　短いｍｉｃｒｏＳＤカードアダプタ　【スライドロック式】</a></p>

<ul>
<li>今回はこれとmicro SDカードを使った。ケースからはみ出なくてよい。</li>
</ul></li>
</ul>

<h2>ソースコード</h2>

<ul>
<li><a href="https://github.com/fukayatsu/pintercom">fukayatsu/pintercom</a></li>
</ul>

<h4>あれな話</h4>

<ul>
<li><a href="https://github.com/jwhitehorn/pi_piper">jwhitehorn/pi_piper</a>でうまく内部のpull-up抵抗が使えてないようだったので、直接コマンドを実行してpull-up状態にしている。

<ul>
<li>TODO: あとでソースコード追ってみる</li>
</ul></li>
<li>Hipchatに画像ファイルをuploadする公式APIがあってもいい気がする。

<ul>
<li>内部的にはあるっぽい</li>
</ul></li>
</ul>

<h2>動作テストの様子</h2>

<ul>
<li>青いボタンを押すと、こんな感じでhipchatに書き込まれる
<img alt="w50" src="/images/2014-01-19-1390133726_1.png" /></li>
</ul>

<p><code>@here</code>を使ってそのroomにいる人にだけ通知するようにしているので、<br>
対応できる人がそのroomに入ってくれるといいかんじだと思う。</p>

<h2>雑感</h2>

<p>もうちょっとテストしてオフィスの玄関付近に置こうと思うけど、<br>
近くにコンセントがないのでどうやって電源にアクセスするかを考えている。</p>

<ul>
<li><a href="http://www.amazon.co.jp/iBUFFALO-Arvel-USB%E5%BB%B6%E9%95%B7%E3%82%B9%E3%83%AA%E3%83%A0%E3%82%B1%E3%83%BC%E3%83%96%E3%83%AB-%E3%83%9B%E3%83%AF%E3%82%A4%E3%83%88-AUSE20WH/dp/B000G2XTW8/ref=cm_lmf_tit_15">Amazon.co.jp： iBUFFALO Arvel USB延長スリムケーブル 1.5M ホワイト AUSE15WH: パソコン・周辺機器</a>

<ul>
<li>こういうのを使うのもありかもしれない</li>
</ul></li>
</ul>

</div>
<footer>
<div class='footer-inner'>
<p class='copyright'>
<a target="_new" href="https:/twitter.com/fukayatsu">© fukayatsu</a>
</p>
<p class='powerd'>
Powered by
<a target="_new" href="https://github.com/fukayatsu/fukayatsu.github.io/tree/source">GitHub</a>
&
<a target="_new" href="https://travis-ci.org/fukayatsu/fukayatsu.github.io">Travis CI</a>
&
<a target="_new" href="http://middlemanapp.com/">Middleman</a>
</p>
</div>
</footer>
</div>
</body>
</html>
