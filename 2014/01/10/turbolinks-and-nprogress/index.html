<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge;chrome=1' http-equiv='X-UA-Compatible'>
<link href='/stylesheets/all.css?1384954982' media='all' rel='stylesheet' type='text/css'>
<link href='/images/favicon.ico' rel='icon' type='image/ico'>
<title>
ブログにturbolinksとnprogressを適用した - fukayatsu.dev
</title>
<script src="/javascripts/all.js" type="text/javascript"></script>
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36253613-1']);
  _gaq.push(['_setDomainName', 'blog.fukayatsu.com']);
  
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body>
<div class='content'>
<header>
<div class='header-inner'>
<div class='header-image'>
<a href="/"><img src='/images/fukayatsu.jpg'>
</a>
</div>
<div class='header-text'>
<a href="/"><h1 class='header-title'>
fukayatsu.dev
</h1>
</a>
<a target="_new" href="http://blog.fukayatsu.com/"><p class='header-description'>
under development
</p>
</a>
</div>
</div>
</header>
<div class='publish-date'>
<a href="/2014/01/10/turbolinks-and-nprogress/">2014-01-10 21:26:00 +0900</a>
</div>
<div class='tags'>
</div>
<div id='main' role='main'>
<h1 class='title'>ブログにturbolinksとnprogressを適用した</h1>
<ul>
<li><a href="https://github.com/rails/turbolinks">rails/turbolinks</a>

<ul>
<li>ざっくり言うとページ遷移をajaxに置き換えて高速化してくれる。</li>
<li>rails4からの標準機能。</li>
</ul></li>
<li><a href="https://github.com/rstacruz/nprogress">rstacruz/nprogress</a>

<ul>
<li><a href="http://tecuration.com/2013/09/nprogress">YouTube風のページローダーを実装する「NProgress.js」 - Tecuration .com</a></li>
</ul></li>
</ul>

<p>プログレスバーの発動タイミングはnprogressのreadmeの例をそのまま使っている↓</p>
<pre class="highlight javascript"><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;page:fetch&#39;</span><span class="p">,</span>   <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">NProgress</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span> <span class="p">});</span>
<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;page:change&#39;</span><span class="p">,</span>  <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">NProgress</span><span class="p">.</span><span class="nx">done</span><span class="p">();</span> <span class="p">});</span>
<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;page:restore&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">NProgress</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span> <span class="p">});</span>
</pre>
<ul>
<li><a href="https://github.com/fukayatsu/fukayatsu.github.io/compare/9e9a51831195d7c8a03cf2500ffa7e2cd576aaab...e7e124020bf24e98c2cfee15b0c34cbe9bdadf1d">変更の詳細</a></li>
</ul>

<h1>雑感</h1>

<ul>
<li>ページ遷移が速く(感じるように)なって、かなり快適になった。</li>
<li>turbolinksとnprogressの相性がよい</li>
<li>普段からrailsでturbolinksを使っているものの、何故か静的サイトでturbolinksを使うという発想が無かった。</li>
</ul>

</div>
<footer>
<div class='footer-inner'>
<p class='copyright'>
<a target="_new" href="https:/twitter.com/fukayatsu">© fukayatsu</a>
</p>
<p class='powerd'>
Powered by
<a target="_new" href="https://github.com/fukayatsu/fukayatsu.github.io/tree/source">GitHub</a>
&
<a target="_new" href="https://travis-ci.org/fukayatsu/fukayatsu.github.io">Travis CI</a>
&
<a target="_new" href="http://middlemanapp.com/">Middleman</a>
</p>
</div>
</footer>
</div>
</body>
</html>
