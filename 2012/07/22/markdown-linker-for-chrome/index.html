<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge;chrome=1' http-equiv='X-UA-Compatible'>
<link href='/stylesheets/all.css?1384954982' media='all' rel='stylesheet' type='text/css'>
<link href='/images/favicon.ico' rel='icon' type='image/ico'>
<title>
markdown形式でリンクをクリップボードにコピーするchrome-extension作った - fukayatsu.dev
</title>
<script src="/javascripts/all.js" type="text/javascript"></script>
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36253613-1']);
  _gaq.push(['_setDomainName', 'blog.fukayatsu.com']);
  
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body>
<div class='content'>
<header>
<div class='header-inner'>
<div class='header-image'>
<a href="/"><img src='/images/fukayatsu.jpg'>
</a>
</div>
<div class='header-text'>
<a href="/"><h1 class='header-title'>
fukayatsu.dev
</h1>
</a>
<a target="_new" href="http://blog.fukayatsu.com/"><p class='header-description'>
under development
</p>
</a>
</div>
</div>
</header>
<div class='publish-date'>
<a href="/2012/07/22/markdown-linker-for-chrome/">2012-07-22 17:29:00 +0900</a>
</div>
<div class='tags'>
<a href="/tags/chrome-extensions/">chrome-extensions</a>
</div>
<div id='main' role='main'>
<h1 class='title'>markdown形式でリンクをクリップボードにコピーするchrome-extension作った</h1>
<p>2012-07-23　21:14　画像とか追加</p>

<p><img alt="sTxwGfbZ9VgiRTaNld2TWpS9p6KJGUzL2p9mvhr6GpoF0-t_JXEynxmsS8Ejx-gFdhHzZUir=s640-h400-e365 (640×400)" src="https://lh3.googleusercontent.com/sTxwGfbZ9VgiRTaNld2TWpS9p6KJGUzL2p9mvhr6GpoF0-t_JXEynxmsS8Ejx-gFdhHzZUir=s640-h400-e365" /></p>

<blockquote>
<p><a href="https://chrome.google.com/webstore/detail/kgadgjmlofjccpefhdagbonmohjknlll">Chrome Web Store - Markdown Linker</a></p>
</blockquote>

<p>octopressでブログを書くようになって、markdownで文章を書く機会が増えた。<br>
しかしながら画像やリンクをmarkdown形式で挿入するのが若干面倒なので<br>
chrome extensionを作ることにした。作りながら記事を書いてみる</p>

<h2>やりたかったこと</h2>

<p>とりあえずやりたいことは以下の3つ</p>

<ol>
<li>ページのタイトルとurlをコピー =&gt; <code>[ title ]( url )</code></li>
<li>テキストリンクのtextとurlをコピー =&gt; <code>[ text ]( url )</code></li>
<li>画像のaltとurlをコピー =&gt; <code>![ alt ]( url )</code></li>
</ol>

<p>このうち、1. はそういう拡張機能がすでにあるようだったが、2,3　は軽く探した限りでは見つからなかった。<br>
ちょっとモチベーションが上がる。</p>

<h2>名前</h2>

<p>まず名前を決めてリポジトリを作る。あまり考えずに、</p>

<blockquote>
<p>chrome-markdown-linker</p>
</blockquote>

<p>とした。likerがちょっとニュアンス違うと思うけど、まあいいか。<br>
chrome-markdown-link-copyだとちょっと長いし。</p>

<h2>準備</h2>

<p>extentionはchrome上でもビルドできるが、コンソールからビルドしたいので<a href="https://github.com/Constellation/crxmake">Constellation/crxmake</a>を入れる。</p>
<pre class="highlight text">gem source -a http://gemcutter.org
sudo gem install crxmake
</pre>
<p>githubで使い方を見てRakefileを書いておく</p>

<h2>資料</h2>

<blockquote>
<p><a href="http://code.google.com/chrome/extensions/index.html">Google Chrome Extensions - Google Code</a></p>
</blockquote>

<p>ここのGetting Started tutorialとかSamplesとか見ながらやるのが早いと思う。</p>

<h2>実装</h2>

<p>以前<a href="https://chrome.google.com/webstore/detail/fnpppbhohekmekeomhfihapjadolpjjh">twitterのparmalinkをはてな記法でクリップボードにコピーする拡張</a>を作ったのでそれを参考にする。<br>
ポイントは一度リンクの情報をbackground pageのtextareaに渡して、文字列を選択してからクリップボードにコピーするところ。</p>

<blockquote>
<p><a href="https://github.com/fukayatsu/chrome-markdown-linker">fukayatsu/chrome-markdown-linker</a></p>
</blockquote>

<p>とりあえずこんな感じになった。</p>

<h2>TODO</h2>

<ul>
<li>画像のalt textに対応する</li>
<li>ショートカットキーに対応する</li>
</ul>

</div>
<footer>
<div class='footer-inner'>
<p class='copyright'>
<a target="_new" href="https:/twitter.com/fukayatsu">© fukayatsu</a>
</p>
<p class='powerd'>
Powered by
<a target="_new" href="https://github.com/fukayatsu/fukayatsu.github.io/tree/source">GitHub</a>
&
<a target="_new" href="https://travis-ci.org/fukayatsu/fukayatsu.github.io">Travis CI</a>
&
<a target="_new" href="http://middlemanapp.com/">Middleman</a>
</p>
</div>
</footer>
</div>
</body>
</html>
